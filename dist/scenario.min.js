/* Scenario.js v1.0.0
 * The MIT License (MIT)
 * Copyright (c) 2014 Maker Studios */
(function(a,b){"use strict";var c="Scenario",d=d||function(a){var c,d=this;d.cache={ranTests:{},weights:{},totalWeights:0},d.tests={},c={track:function(a,b,c){"undefined"!=typeof b?mixpanel.track(a,b,c):mixpanel.track(a,!1,c)},toSlug:function(a){return a.toLowerCase().replace(/-+/g,"").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")},chooseWeightedItem:function(){var a,b=[];for(a in d.cache.weights)for(var c=d.cache.weights[a];c--;)b.push(parseInt(a));return b[Math.floor(Math.random()*b.length)]}},d.test=function(b){b.weight=b.weight||1;var e=d.tests[a.name].length;return d.tests[a.name].push({name:b.name,callback:b.callback,weight:b.weight,className:b.className||c.toSlug(b.name)}),d.cache.weights[e]=b.weight,d.cache.totalWeights+=b.weight,this},d.go=function(){var e=c.chooseWeightedItem(),f=d.tests[a.name][e];return b.body.className+=" "+f.className,d.cache.ranTests[a.name]=f.name,c.track(a.name+" Start",{Tests:f.name}),"function"==typeof f.callback&&f.callback.call(null,{name:f.name,slug:f.className,weight:f.weight+"/"+d.cache.totalWeights,odds:Math.floor(f.weight/d.cache.totalWeights*100)}),this},d.complete=function(b){return c.track(a.name+" Finish",null,b)},d.tests[a.name]=d.tests[a.name]||[]};this[c]=d}).call(this,window,document);Scenario.version='1.0.0';